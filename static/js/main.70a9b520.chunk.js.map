{"version":3,"sources":["components/ImageDetections/consts.ts","components/ImageDetections/ImageDetections.js","components/ImageDetections/DefinitionSearch.ts","components/ImageInput/ImageInput.js","components/TracauShoutout/TracauShoutout.jsx","components/InputText/InputText.jsx","components/Definition/Definition.jsx","components/DefinedWord/DefinedWord.jsx","components/SearchedText/SearchedText.jsx","components/TextInput/TextInput.js","App.js","reportWebVitals.js","index.js"],"names":["Tag","Aspect","Form","Case","Gender","Mood","Number","Person","Proper","Reciprocity","Tense","Voice","ImageDetections","detection","conjugations","partOfSpeech","className","aspect","form","mood","this","props","lang","getPronoun","person","tense","voice","case","gender","number","definition","def","length","defnsList","tr","map","text","boundingPoly","vertices","description","translations","undefined","detections","p0","p1","p2","p3","x","Math","abs","console","log","rotation","detectImageRotation","i","yTop","min","y","xLeft","yBottom","max","xRight","topProp","leftProp","heightProp","widthProp","imageWidth","imageHeight","popover","Popover","id","Title","Content","renderPartOfSpeech","lemma","renderDefinition","adjustedImageHeight","window","innerHeight","adjustedImageWidth","adjustedTop","adjustedLeft","adjustedHeight","adjustedWidth","OverlayTrigger","placement","overlay","style","top","left","height","width","renderDetectionsOnImage","src","URL","createObjectURL","images","onClick","restartSearch","React","Component","punctuation","lemmatize","language","axios","post","then","result","data","tokens","filter","token","trim","replace","addLemmasToDetections","a","Error","contexts","lemmatizedDetections","context","tag","myCase","proper","Object","assign","filteredDetections","val","searchRussianDefinitions","defnPromises","get","YANDEX_API_KEY","key","Promise","all","results","searchAgainPromises","DEEPL_API_KEY","defn","printContext","searchDefinitions","definedDetections","error","ImageInput","state","img_files","img_buffers","imagesInput","imagesParsed","textDetections","detectionsLoaded","changeImage","bind","setImageProps","info","setState","errorOccurred","event","target","files","img_type","parseFiles","promises","Array","from","img_file","parseFile","strings","getOCR","resolve","reader","FileReader","addEventListener","image","Image","onload","readAsDataURL","img","textAnnotations","fullText","fullTextAnnotation","getDefinitions","catch","err","to","type","onChange","TracauShoutout","href","alt","InputText","curText","shiftKey","submitSearch","onKeyPress","detectHotkeySubmit","value","icon","faSearch","_","Definition","startsWith","slice","DefinedWord","word","as","SearchedText","isLoaded","searchResults","words","split","compoundDefs","compoundPromises","searchCompoundWord","compoundDef","definitions","remainingSearchPromises","compoundPrev","compoundNext","tracauSearch","searchedText","tracau_API_key","tratu","tracauData","fields","fulltext","engDefStart","indexOf","defnTab","engDefEnd","defnsStartTag","defnsStart","defns","defnsEnd","entryList","forEach","parsedDef","seeOtherTag","seeOtherEnd","push","search","footer","returnToSearch","compoundWord","TextInput","searched","toggleSearch","App","path","component","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.70a9b520.chunk.js","sourcesContent":["const punctuation: RegExp = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n\r\n/** Google Cloud Natural Language API enums */\r\nenum Tag {\r\n\tUNKNOWN = \"\",\r\n\tADJ = \"Adjective\",\r\n\tADP = \"Preposition\",\r\n\tADV = \"Adverb\",\r\n\tCONJ = \"Conjunction\",\r\n\tDET = \"Determiner\",\r\n\tNOUN = \"Noun\",\r\n\tNUM = \"Number\",\r\n\tPRON = \"Pronoun\",\r\n\tPRT = \"Particle\",\r\n\tPUNCT = \"Punctuation\",\r\n\tVERB = \"Verb\",\r\n\tX = \"\",\r\n\tAFFIX = \"Affix\",\r\n}\r\n\r\nenum Aspect {\r\n\tASPECT_UNKNOWN = \"\",\r\n\tPERFECTIVE = \"Perfective\",\r\n\tIMPERFECTIVE = \"Imperfective\",\r\n\tPROGRESSIVE = \"Progressive\",\r\n}\r\n\r\nenum Form {\r\n\tFORM_UNKNOWN = \"\",\r\n\tADNOMIAL = \"Adnomial\",\r\n\tAUXILIARY = \"Auxiliary\",\r\n\tCOMPLEMENTIZER = \"Complementizer\",\r\n\tFINAL_ENDING = \"Final ending\",\r\n\tGERUND = \"Gerund\",\r\n\tREALIS = \"Realis\",\r\n\tIRREALIS = \"Irrealis\",\r\n\tSHORT = \"Short form\",\r\n\tLONG = \"Long form\",\r\n\tORDER = \"Order form\",\r\n\tSPECIFIC = \"Specific form\"\r\n}\r\n\r\nenum Case {\r\n\tCASE_UNKNOWN = \"\",\r\n\tACCUSATIVE = \"Accusative\",\r\n\tADVERBIAL = \"Adverbial\",\r\n\tCOMPLEMENTIVE = \"Complementive\",\r\n\tDATIVE = \"Dative\",\r\n\tGENITIVE = \"Genitive\",\r\n\tINSTRUMENTAL = \"Instrumental\",\r\n\tLOCATIVE = \"Locative\",\r\n\tNOMINATIVE = \"Nominative\",\r\n\tOBLIQUE = \"Oblique\",\r\n\tPARTITIVE = \"Partitive\",\r\n\tPREPOSITIONAL = \"Prepositional\",\r\n\tREFLEXIVE_CASE = \"Reflexive\",\r\n\tRELATIVE_CASE = \"Relative\",\r\n\tVOCATIVE = \"Vocative\"\r\n}\r\n\r\nenum Gender {\r\n\tGENDER_UNKNOWN = \"\",\r\n\tFEMININE = \"Feminine\",\r\n\tMASCULINE = \"Masculine\",\r\n\tNEUTER = \"Neuter\"\r\n}\r\n\r\nenum Mood {\r\n\tMOOD_UNKNOWN = \"\",\r\n\tCONDITIONAL_MOOD = \"Conditional\",\r\n\tIMPERATIVE = \"Imperative\",\r\n\tINDICATIVE = \"Indicative\",\r\n\tINTERROGATIVE = \"Interrogative\",\r\n\tJUSSIVE = \"Jussive\",\r\n\tSUBJUNCTIVE = \"Subjunctive\",\r\n}\r\n\r\nenum Number {\r\n\tNUMBER_UNKNOWN = \"\",\r\n\tSINGULAR = \"Singular\",\r\n\tPLURAL = \"Plural\",\r\n\tDUAL = \"Dual\"\r\n}\r\n\r\nenum Person {\r\n\tPERSON_UNKNOWN = \"\",\r\n\tFIRST = \"First\",\r\n\tSECOND = \"Second\",\r\n\tTHIRD = \"Third\",\r\n\tREFLEXIVE_PERSON = \"Reflexive\",\r\n}\r\n\r\nenum Proper {\r\n\tPROPER_UNKNOWN = \"\",\r\n\tPROPER = \"Proper\",\r\n\tNOT_Proper = \"Not Proper\"\r\n}\r\n\r\nenum Reciprocity {\r\n\tRECIPROCITY_UNKNOWN = \"\",\r\n\tRECIPROCAL = \"Reciprocal\",\r\n\tNON_RECIPROCAL = \"Non-reciprocal\",\r\n}\r\n\r\nenum Tense {\r\n\tTENSE_UNKNOWN = \"\",\r\n\tCONDITIONAL_TENSE = \"Conditional\",\r\n\tFUTURE = \"Future\",\r\n\tPAST = \"Past\",\r\n\tPRESENT = \"Present\",\r\n\tIMPERFECT = \"Imperfect\",\r\n\tPLUPERFECT = \"Pluperfect\",\r\n}\r\n\r\nenum Voice {\r\n\tVOICE_UNKNOWN = \"\",\r\n\tACTIVE = \"Active\",\r\n\tCAUSATIVE = \"Causative\",\r\n\tPASSIVE = \"Passive\",\r\n}\r\n\r\nexport { punctuation, Tag, Form, Aspect, Case, Gender, Mood, Number, Person, Proper, Reciprocity, Tense, Voice }","import React from 'react';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport './ImageDetections.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ImageDetections extends React.Component {\r\n\trenderPartOfSpeech(detection) {\r\n\t\tconst conjugations = detection.partOfSpeech === \"Verb\"? (\r\n\t\t\t<div className=\"conjugations\">\r\n\t\t\t\t{detection.aspect !== \"\"? (<div key=\"aspect\">{detection.aspect}</div>) : null}\r\n\t\t\t\t{detection.form === \"Short form\"? (<div key=\"form\">Short Form</div>) : null}\r\n\t\t\t\t{detection.mood === \"Imperative\"? (<div key=\"mood\">Imperative</div>) : null}\r\n\t\t\t\t<div key=\"number/person\">{this.props.lang === \"ru\"? this.getPronoun(detection) : (<div key=\"person\">{detection.person}</div>)}</div>\r\n\t\t\t\t{detection.tense !== \"\"? (<div key=\"tense\">{detection.tense}</div>) : null}\r\n\t\t\t\t{detection.voice !== \"\"? (<div key=\"voice\">{detection.voice}</div>) : null}\r\n\t\t\t</div>\r\n\t\t) : detection.partOfSpeech === \"Noun\"? (\r\n\t\t\t<div className=\"conjugations\">\r\n\t\t\t\t{detection.case !== \"\"? (<div key=\"case\">{detection.case}</div>) : null}\r\n\t\t\t\t{detection.gender !== \"\"? (<div key=\"gender\">{detection.gender}</div>) : null}\r\n\t\t\t\t{detection.number !== \"\"? (<div key=\"number\">{detection.number}</div>) : null}\r\n\t\t\t</div>\r\n\t\t) : detection.partOfSpeech === \"Adjective\"? (\r\n\t\t\t<div className=\"conjugations\">\r\n\t\t\t\t{detection.case !== \"\"? (<div key=\"case\">{detection.case}</div>) : null}\r\n\t\t\t\t{detection.gender !== \"\"? (<div key=\"gender\">{detection.gender}</div>) : null}\r\n\t\t\t\t{detection.number !== \"Plural\"? (<div key=\"number\">Plural</div>) : null}\r\n\t\t\t</div>\r\n\t\t) : null;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"context\">\r\n\t\t\t\t<div className=\"part-of-speech\">{detection.partOfSpeech}</div>\r\n\t\t\t\t{conjugations}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tgetPronoun(detection) {\r\n\t\tif (detection.person === \"First\") {\r\n\t\t\tif (detection.number === \"Singular\") return \"Я\"\r\n\t\t\treturn \"Мы\";\r\n\t\t} else if (detection.person === \"Second\") {\r\n\t\t\tif (detection.number === \"Singular\") return \"Ты\";\r\n\t\t\treturn \"Вы\";\r\n\t\t} else if (detection.person === \"Third\") {\r\n\t\t\tif (detection.number === \"Singular\") return \"Он/Она/Оно\";\r\n\t\t\treturn \"Они\";\r\n\t\t} else {\r\n\t\t\tif (detection.number === \"Singular\") return \"Reflexive (singular)\";\r\n\t\t\treturn \"Reflexive (plural)\";\r\n\t\t}\r\n\t}\r\n\r\n\trenderDefinition(detection) {\r\n\t\tif (detection.definition.def && detection.definition.def.length > 0) {\r\n\t\t\tconst defnsList = detection.definition.def[0].tr.map(tr => {\r\n\t\t\t\treturn (<li key={tr.text + detection.boundingPoly.vertices[0]}>{tr.text}</li>);\r\n\t\t\t});\r\n\t\t\treturn (<ol key={detection.description + detection.boundingPoly.vertices[0] + \"list\"}>{defnsList}</ol>);\r\n\r\n\t\t} else if (detection.definition.translations && detection.definition.translations.length > 0) {\r\n\t\t\tif (detection.definition.translations[0] === '' || detection.definition.translations[0] === undefined) return (\"no definition found :(\")\r\n\t\t\tconst defnsList = detection.definition.translations.map(tr => {\r\n\t\t\t\treturn (<li key={tr.text + detection.boundingPoly.vertices[0]}>{tr.text}</li>);\r\n\t\t\t});\r\n\t\t\treturn (<ol key={detection.description + detection.boundingPoly.vertices[0] + \"list\"}>{defnsList}</ol>);\r\n\r\n\t\t} else return (\"no definition found :(\");\r\n\t}\r\n\r\n\tdetectImageRotation() {\r\n\t\t// pages -> blocks -> paragraphs -> words\r\n\t\tconst detection = this.props.detections[0];\r\n\t\tconst p0 = detection.boundingPoly.vertices[0];\r\n\t\tconst p1 = detection.boundingPoly.vertices[1];\r\n\t\tconst p2 = detection.boundingPoly.vertices[3];\r\n\t\tconst p3 = detection.boundingPoly.vertices[2];\r\n\r\n\t\tif (p1.x > p0.x && Math.abs(p1.x - p0.x) > Math.abs(p1.x - p3.x)) {\r\n\t\t\t// console.log(\"0 1\\n3 2\");\r\n\t\t\treturn \"right side up\";\r\n\t\t}\r\n\t\t\r\n\t\telse {\r\n\t\t\tconsole.log(\"the image was flipped at some point during detection and I simply don't know why :/\");\r\n\t\t\tif (p1.x < p0.x && Math.abs(p1.x - p0.x) > Math.abs(p0.x - p3.x)) {\r\n\t\t\t\tconsole.log(\"2 3\\n1 0\");\r\n\t\t\t\treturn \"upside-down\";\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (p2.x > p1.x && Math.abs(p2.x - p1.x) > Math.abs(p1.x - p0.x)) {\r\n\t\t\t\t// console.log(\"1 2\\n0 3\");\r\n\t\t\t\treturn \"rotated left\";\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (p1.x > p2.x && Math.abs(p1.x - p2.x) > Math.abs(p1.x - p0.x)) {\r\n\t\t\t\tconsole.log(\"3 0\\n2 1\");\r\n\t\t\t\treturn \"rotated right\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trenderDetectionsOnImage() {\r\n\t\tconst rotation = this.detectImageRotation();\r\n\r\n\t\tconst detections = this.props.detections.map((detection, i) => {\r\n\t\t\tconst p0 = detection.boundingPoly.vertices[0];\r\n            const p1 = detection.boundingPoly.vertices[1];\r\n            const p2 = detection.boundingPoly.vertices[3];\r\n            const p3 = detection.boundingPoly.vertices[2];\r\n\r\n\t\t\tconst yTop = Math.min(p0.y, p1.y, p2.y, p3.y);\r\n            const xLeft = Math.min(p0.x, p1.x, p2.x, p3.x);\r\n            const yBottom = Math.max(p0.y, p1.y, p2.y, p3.y);\r\n            const xRight = Math.max(p0.x, p1.x, p2.x, p3.x);\r\n\r\n            const height = yBottom - yTop;\r\n            const width = xRight - xLeft;\r\n\r\n            var topProp = yTop;\r\n            var leftProp = xLeft;\r\n            var heightProp = height;\r\n            var widthProp = width;\r\n\r\n\t\t\tif (rotation !== \"right side up\") {\r\n\t\t\t\tif (rotation === \"rotated left\") {\r\n\t\t\t\t\t// console.log(\"correcting left rotation\");\r\n\t\t\t\t\ttopProp = xLeft;\r\n                    leftProp = this.props.imageWidth - yBottom;\r\n                    heightProp = xRight - xLeft;\r\n                    widthProp = yBottom - yTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (rotation === \"rotated right\") {\r\n\t\t\t\t\tconsole.log(\"correcting right rotation\");\r\n\t\t\t\t\ttopProp = this.props.imageWidth - xRight;\r\n                    leftProp = yTop;\r\n                    heightProp = xRight - xLeft;\r\n                    widthProp = yBottom - yTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (rotation === \"upside-down\") {\r\n\t\t\t\t\tconsole.log(\"correcting upside-down rotation\");\r\n\t\t\t\t\ttopProp = this.props.imageHeight - yTop;\r\n                    leftProp = this.props.imageWidth - xRight;\r\n                    heightProp = yBottom - yTop;\r\n                    widthProp = xRight - xLeft;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst popover = (\r\n\t\t\t\t<Popover className=\"dynamic-text-size\" id={detection.description} key={detection.description + topProp + \"-popover\"}>\r\n\t\t\t\t\t<Popover.Title className=\"large-dynamic-text-size\">{detection.description}</Popover.Title>\r\n\t\t\t\t\t<Popover.Content>\r\n\t\t\t\t\t\t{this.renderPartOfSpeech(detection)}\r\n\t\t\t\t\t\t{detection.lemma !== detection.description? (<div className=\"conjugation-of\"><div>Conjugation of</div><div className=\"lemma\">{detection.lemma}</div></div>) : null}\r\n\t\t\t\t\t\t<div className=\"lemma-definition\">{this.renderDefinition(detection)}</div>\r\n\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t</Popover>\r\n\t\t\t);\r\n\r\n\t\t\tconst adjustedImageHeight = window.innerHeight;\r\n\t\t\tconst adjustedImageWidth = window.innerHeight * (this.props.imageWidth / this.props.imageHeight);\r\n\r\n\t\t\tconst adjustedTop = (topProp / this.props.imageHeight) * adjustedImageHeight;\r\n\t\t\tconst adjustedLeft = (leftProp / this.props.imageWidth) * adjustedImageWidth;\r\n\t\t\tconst adjustedHeight = (heightProp / this.props.imageHeight) * adjustedImageHeight;\r\n\t\t\tconst adjustedWidth = (widthProp / this.props.imageWidth) * adjustedImageWidth;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div key={detection.description + topProp}>\r\n\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\tkey={detection.description}\r\n\t\t\t\t\t\tplacement='top'\r\n\t\t\t\t\t\toverlay={popover}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div key={adjustedTop + \"-text-overlay\"} className=\"text-overlay\" style={{ top: adjustedTop, left: adjustedLeft, height: adjustedHeight, width: adjustedWidth }}></div>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn detections;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"ImageDetections\">\r\n\t\t\t\t<div className=\"img-box\">\r\n\t\t\t\t\t{this.renderDetectionsOnImage()}\r\n\t\t\t\t\t<img key=\"original-image\" src={URL.createObjectURL(this.props.images[0])} height={window.innerHeight} top=\"0px\" />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button className=\"back-button\" onClick={this.props.restartSearch}>Back to Search</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ImageDetections;","import axios from \"axios\";\r\nimport YANDEX_API_KEY from '../../yandex_key.json';\r\nimport DEEPL_API_KEY from '../../deepL_api_key.json';\r\nimport { Aspect, Case, Form, Gender, Mood, Number, Person, Proper, Tag, Tense, Voice } from \"./consts\";\r\n\r\nconst lemmatizeUrl: string = 'https://us-east4-true-bit-315318.cloudfunctions.net/lemmatize';\r\nconst punctuation: RegExp = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n\r\nfunction lemmatize(detections: Array<any>, language: string) {\r\n    return axios.post(lemmatizeUrl, { text: detections[0].description, lang: language }).then(result => {\r\n        const tokens = result.data.tokens;\r\n        const contexts = tokens.filter((token: any) => token.lemma.trim().replace(punctuation, \"\") !== \"\");\r\n        return contexts;\r\n    });\r\n}\r\n\r\nasync function addLemmasToDetections(detections: Array<any>, language: string): Promise<Array<any>> {\r\n    if (detections.length < 1) throw Error(\"no text detected in this image! :(\");\r\n    if (detections.length === 1) throw Error(\"no individual words detected in this image\");\r\n\r\n    try {\r\n        const contexts: Array<any> = await lemmatize(detections, language);\r\n\r\n        if (contexts.length + 1 != detections.length) throw Error(\"the amount of words detected and the amount of words lemmatized are different...\");\r\n\r\n        const lemmatizedDetections = contexts.map((context, i) => {\r\n            const partOfSpeech: keyof typeof Tag = context.partOfSpeech.tag;\r\n            const aspect: keyof typeof  Aspect = context.partOfSpeech.aspect;\r\n            const myCase: keyof typeof Case = context.partOfSpeech.case;\r\n            const form: keyof typeof Form = context.partOfSpeech.form;\r\n            const gender: keyof typeof Gender = context.partOfSpeech.gender;\r\n            const mood: keyof typeof Mood = context.partOfSpeech.mood;\r\n            const number: keyof typeof Number = context.partOfSpeech.number;\r\n            const person: keyof typeof Person = context.partOfSpeech.person;\r\n            const proper: keyof typeof Proper = context.partOfSpeech.proper;\r\n            const tense: keyof typeof Tense = context.partOfSpeech.tense;\r\n            const voice: keyof typeof Voice = context.partOfSpeech.voice;\r\n\r\n            Object.assign(detections[i + 1], {\r\n                lemma: context.lemma,\r\n                partOfSpeech: Tag[partOfSpeech],\r\n                aspect: Aspect[aspect],\r\n                case: Case[myCase],\r\n                form: Form[form],\r\n                gender: Gender[gender],\r\n                mood: Mood[mood],\r\n                number: Number[number],\r\n                person: Person[person],\r\n                proper: Proper[proper],\r\n                tense: Tense[tense],\r\n                voice: Voice[voice]\r\n            });\r\n\r\n            return detections[i + 1];\r\n        });\r\n\r\n        // filter out punctuation detections\r\n        const filteredDetections = lemmatizedDetections.filter((val: any) => val.partOfSpeech !== \"Punctuation\");\r\n        return filteredDetections;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n}\r\n\r\nasync function searchRussianDefinitions(detections: Array<any>) {\r\n    try {\r\n        const filteredDetections = await addLemmasToDetections(detections, 'ru');\r\n\r\n        const defnPromises = filteredDetections.map(detection => {\r\n            // console.log(\"detection:\", detection.description, \"lemma:\", detection.lemma, \"part of speech:\", detection.partOfSpeech);\r\n            return axios.get(`https://dictionary.yandex.net/api/v1/dicservice.json/lookup?key=${YANDEX_API_KEY.key}&lang=ru-en&text=${detection.lemma}`).then(result => {\r\n                Object.assign(detection, { definition: result.data });\r\n                return detection;\r\n            });\r\n        });\r\n\r\n        return Promise.all(defnPromises).then(results => {\r\n            const searchAgainPromises = results.map(detection => {\r\n                if (detection.def === undefined || detection.def.length === 0) {\r\n                    return axios.get(`https://api-free.deepl.com/v2/translate?auth_key=${DEEPL_API_KEY.key}&text=${detection.lemma}&target_lang=EN`).then(defn => {\r\n                        Object.assign(detection, { definition: defn.data });\r\n                        return detection;\r\n                    });\r\n                } else { return detection }\r\n            })\r\n\r\n            return Promise.all(searchAgainPromises).then(results => {\r\n                return results;\r\n            });\r\n        })\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n}\r\n\r\n// async function searchKoreanDefinitions(detections: Array<any>) {\r\n//     const filteredDetections = await addLemmasToDetections(detections, 'ko');\r\n\r\n//     const defnPromises = filteredDetections.map(detection => {\r\n//         return axios.get(`https://krdict.korean.go.kr/api/search?key=CFE52C024B192CE5E56F3B7D8EA5DA3D&translated=y&trans_lang=2&q=${detection.lemma}`).then(result => {\r\n//             Object.assign(detection, { definition: result });\r\n//             return detection;\r\n//         });\r\n//     });\r\n\r\n//     return Promise.all(defnPromises).then(results => {\r\n//         return results;\r\n//     });\r\n// }\r\n\r\nasync function printContext(detections: Array<any>, language: string) {\r\n    const filteredDetections = await addLemmasToDetections(detections, language);\r\n\r\n    console.log('filtered detections:', filteredDetections);\r\n\r\n    const defnPromises = filteredDetections.map(detection => {\r\n        Object.assign(detection, { definition: {} });\r\n        return detection;\r\n    });\r\n\r\n    return Promise.all(defnPromises).then(results => {\r\n        return results;\r\n    });\r\n}\r\n\r\nasync function searchDefinitions(detections: Array<any>, language: string) {\r\n    try {\r\n        detections = detections.filter(detection => detection.description.trim().replace(punctuation, \"\") !== \"\");\r\n\r\n        if (language === \"ru\") {\r\n            const definedDetections = await searchRussianDefinitions(detections);\r\n            return definedDetections;\r\n        } \r\n        return printContext(detections, language);\r\n    } catch (error) {\r\n        console.error(\"error occurred during lemmatization :(\");\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport { searchDefinitions }","import axios from 'axios';\r\nimport React from 'react';\r\nimport ImageDetections from '../ImageDetections/ImageDetections';\r\nimport { searchDefinitions } from '../ImageDetections/DefinitionSearch';\r\nimport './ImageInput.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ImageInput extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { img_files: null, img_buffers: null, imagesInput: false, imagesParsed: false, textDetections: null, definedDetections: null, detectionsLoaded: false, imageWidth: 0, imageHeight: 0 };\r\n        this.changeImage = this.changeImage.bind(this);\r\n        this.setImageProps = this.setImageProps.bind(this);\r\n        this.restartSearch = this.restartSearch.bind(this);\r\n    }\r\n\r\n    componentDidCatch(error, info) {\r\n        console.log(error, info);\r\n        this.setState({ errorOccurred: true });\r\n    }\r\n\r\n    changeImage(event) {\r\n        this.setState({ img_files: event.target.files, img_type: '.jpg', imagesInput: true }, this.parseFiles);\r\n    }\r\n\r\n    async parseFiles() {\r\n        const promises = Array.from(this.state.img_files).map(img_file => {\r\n            return this.parseFile(img_file);\r\n        });\r\n\r\n        Promise.all(promises).then(strings => {\r\n            this.setState({ img_buffers: strings, imagesParsed: true }, this.getOCR);\r\n        });\r\n    }\r\n\r\n    setImageProps(width, height) {\r\n        this.setState({ imageWidth: width, imageHeight: height });\r\n    }\r\n\r\n    async parseFile(img_file) {\r\n        const setImageProps = this.setImageProps;\r\n\r\n        return new Promise(function (resolve) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", event => {\r\n                var image = new Image();\r\n                image.src = event.target.result;\r\n\r\n                image.onload = function() {\r\n                    setImageProps(this.width, this.height);\r\n                    // console.log(\"image\", this.width, \"x\", this.height);            \r\n                }\r\n\r\n                resolve(reader.result);\r\n            }, false);\r\n            reader.readAsDataURL(img_file);\r\n        });\r\n    }\r\n\r\n    async getOCR() {\r\n        return axios.post(`https://us-east4-true-bit-315318.cloudfunctions.net/documentTextDetection`, { img: this.state.img_buffers[0], lang: \"ru\" }).then(result => {\r\n            this.setState({ textDetections: result.data.textAnnotations, fullText: result.data.fullTextAnnotation }, this.getDefinitions);\r\n        }).catch(err => {\r\n            console.log(\"an error occurred during OCR; trying again\", err);\r\n            this.getOCR();\r\n        })\r\n    }\r\n\r\n    async getDefinitions() {\r\n        searchDefinitions(this.state.textDetections, 'ru').then(results => {\r\n            this.setState({ definedDetections: results, detectionsLoaded: true });\r\n        }).catch(error => {\r\n            console.error(error);\r\n            this.setState({ errorOccurred: true });\r\n        });\r\n    }\r\n\r\n    restartSearch() {\r\n        this.setState({ img_files: null, img_buffers: null, imagesInput: false, imagesParsed: false, textDetections: null, definedDetections: null, detectionsLoaded: false, imageWidth: 0, imageHeight: 0 });\r\n    }\r\n\r\n    render() {\r\n        return this.state.errorOccurred ? (\r\n            <div className=\"ImageInput\">\r\n                <div>An error occured while trying to parse this image. :(</div>\r\n                <button><Link to=\"/img\">Try Again</Link></button>\r\n            </div>\r\n        ) : this.state.detectionsLoaded ? (\r\n            <div className=\"ImageInput\">\r\n                <ImageDetections restartSearch={this.restartSearch} detections={this.state.definedDetections} lang=\"ru\" images={this.state.img_files} imageWidth={this.state.imageWidth} imageHeight={this.state.imageHeight} fullText={this.state.fullText} />\r\n            </div>\r\n        ) : this.state.imagesParsed ? (\r\n            <div className=\"ImageInput\">\r\n                Loading image text...\r\n                <div>\r\n                    <img src={this.state.img_buffers[0]} height={0.5 * window.innerHeight}></img>\r\n                </div>\r\n            </div>\r\n        ) : (\r\n            <div className=\"ImageInput\">\r\n               <div><input type='file' id='single' onChange={this.changeImage} /></div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImageInput;","import React from 'react';\r\nimport './TracauShoutout.scss';\r\n\r\nclass TracauShoutout extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"tracau-banner\">\r\n\t\t\t\t<a href=\"https://tracau.vn\">\r\n\t\t\t\t\t<img src=\"https://tracau.vn/assets/img/api/banner_white.png\" alt=\"Powered by tra câu\"/>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TracauShoutout;","import React from 'react';\r\nimport TracauShoutout from '../TracauShoutout/TracauShoutout';\r\nimport './InputText.scss';\r\nimport '../../App.scss';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass InputText extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {text: \"\"};\r\n    }\r\n\r\n    detectHotkeySubmit(event, curText) {\r\n        if (event.shiftKey && event.key === \"Enter\") {\r\n            this.props.submitSearch(curText);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"InputText\">\r\n                <div className=\"main-content\">\r\n                    <div>Enter text: </div>\r\n                    <div className=\"upper-flex\" onKeyPress = { event => this.detectHotkeySubmit(event, this.state.text) }>\r\n                        <textarea className=\"big-textbox\"\r\n                            value = {this.state.text}\r\n                            onChange = { event => this.setState({ text: event.target.value }) }></textarea>\r\n                        <FontAwesomeIcon icon={faSearch} onClick={_ => this.props.submitSearch(this.state.text)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <TracauShoutout></TracauShoutout>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default InputText;","import React from 'react';\r\nimport '../../App.scss';\r\n\r\nclass Definition extends React.Component {\r\n    render() {\r\n        if (this.props.defnsList[0].startsWith(\"See \")) {\r\n            this.defnsList = this.props.defnsList.slice(1);\r\n        } else this.defnsList = this.props.defnsList;\r\n\r\n        return (\r\n            <div className=\"Definition\">\r\n                <ol>\r\n                    {this.defnsList.map((defn) => <li>{defn}</li>)}\r\n                </ol>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Definition;","import React from 'react';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport '../../App.scss';\r\nimport Definition from '../Definition/Definition';\r\n\r\nclass DefinedWord extends React.Component {\r\n    render() {\r\n        const popover = (\r\n            <Popover id={this.props.word}>\r\n                <Popover.Title as=\"h3\">{this.props.word}</Popover.Title>\r\n                <Popover.Content>\r\n                    <Definition defnsList={this.props.defn} />\r\n                </Popover.Content>\r\n            </Popover>\r\n        );\r\n\r\n        return (\r\n            <div className=\"DefinedWord\">\r\n                <OverlayTrigger\r\n                    key={this.props.word}\r\n                    placement='top'\r\n                    overlay={popover}\r\n                >\r\n                    <div>{this.props.word}</div>\r\n                </OverlayTrigger>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DefinedWord;","import React from 'react';\r\nimport TracauShoutout from '../TracauShoutout/TracauShoutout';\r\nimport DefinedWord from '../DefinedWord/DefinedWord';\r\nimport '../../App.scss';\r\nimport './SearchedText.scss';\r\nimport axios from 'axios';\r\n\r\nclass SearchedText extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { isLoaded: false, searchResults: {} };\r\n    }\r\n\r\n    search(text) {\r\n        const words = text.split(/[ X\\n]/);\r\n        // console.log(\"searching for words\", words);\r\n\r\n        var compoundDefs = {};\r\n\r\n        const compoundPromises = words.map((word, i) => {\r\n            // check for compound words first\r\n            return this.searchCompoundWord(words, i).then((compoundDef) => {\r\n                if (compoundDef && compoundDef.length > 0) {\r\n                    if (!compoundDef[0].startsWith(\"See \")) {\r\n                        compoundDefs[word + \" \" + words[i + 1]] = compoundDef;\r\n                        return Promise.resolve();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        return Promise.all(compoundPromises).then(() => {\r\n            var definitions = Object.assign({}, compoundDefs);  // shallow copy\r\n            console.log(\"compound definitions:\", definitions);\r\n\r\n            const remainingSearchPromises = words.map((word, i) => {\r\n                const compoundPrev = words[i - 1] + \" \" + word;\r\n                const compoundNext = word + \" \" + words[i + 1];\r\n                if (!(compoundPrev in compoundDefs) && !(compoundNext in compoundDefs)) {\r\n                    // not part of a compound word\r\n                    return this.tracauSearch(word).then(def => {\r\n                        if (def && def.length > 0) {\r\n                            definitions[word] = def;\r\n                        }\r\n                        // if it could not be defined, we will simply gray out the word\r\n                        return Promise.resolve();\r\n                    });\r\n                } else return Promise.resolve();\r\n            });\r\n\r\n            return Promise.all(remainingSearchPromises).then(definitions);\r\n        });\r\n    }\r\n\r\n    searchCompoundWord(words, i) {\r\n        if (words.length > i + 1) {\r\n            return this.tracauSearch(words[i] + \" \" + words[i + 1]);\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n    tracauSearch(searchedText) {\r\n        // strip special characters first\r\n        const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n        const text = searchedText.trim().replace(punctuation, \"\");\r\n\r\n        return axios.get(\"https://api.tracau.vn/\" + tracau_API_key + \"/s/\" + text + \"/vi\").then(result => {\r\n            // console.log(`result for ${searchedText}:`, result);\r\n\r\n            if (result.data.tratu.length <= 0)\r\n                return false;\r\n\r\n            const tracauData = result.data.tratu[0].fields.fulltext;\r\n\r\n            const engDefStart = tracauData.indexOf('<article id=\"dict_vv\" data-tab-name=\"Việt - Anh\"');\r\n            var defnTab = tracauData.slice(engDefStart);\r\n            const engDefEnd = defnTab.indexOf('</article>');\r\n            defnTab = defnTab.slice(0, engDefEnd);\r\n\r\n            const defnsStartTag = '<table id=\"definition_T_ve_id\" border=\"0\">';\r\n            const defnsStart = defnTab.indexOf(defnsStartTag) + defnsStartTag.length;\r\n            var defns = defnTab.slice(defnsStart);\r\n            const defnsEnd = defns.indexOf('</table>');\r\n            defns = defns.slice(0, defnsEnd);\r\n\r\n            const aDefStartTag = '<td id=\"I_C\"><font color=\"#999\">■</font></td><td id=\"C_C\" colspan=\"2\">';\r\n            const entryList = defns.split(aDefStartTag);\r\n\r\n            var defnsList = [];\r\n            entryList.slice(1).forEach(def => {\r\n                var parsedDef = def.slice(0, def.indexOf('</td>'));\r\n\r\n                // check if tracau is trying to redirect user to a similar word\r\n                const seeOtherTag = 'Xem <font color=\"#1371BB\">';\r\n                const seeOtherTagLower = 'xem <font color=\"#1371BB\">';\r\n                const seeOtherEnd = parsedDef.indexOf('</font>')\r\n                if (parsedDef.startsWith(seeOtherTag) || parsedDef.startsWith(seeOtherTagLower)) {\r\n                    parsedDef = \"See \" + parsedDef.slice(seeOtherTag.length, seeOtherEnd);\r\n                }\r\n\r\n                defnsList.push(parsedDef);\r\n            });\r\n\r\n            return defnsList;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.search(this.props.text).then((result) => {\r\n            console.log(\"search results\", result);\r\n            this.setState({ isLoaded: true, searchResults: result });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const footer = (\r\n            <div className=\"footer\">\r\n                <div className=\"submit-search\">\r\n                    <button onClick={this.props.returnToSearch}>Search again</button>\r\n                </div>\r\n                <TracauShoutout></TracauShoutout>\r\n            </div>\r\n        );\r\n\r\n        return this.props.text === \"\" ? (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">\r\n                        <div>Oops! Looks like no text was input. Would you like to search again?</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        ) : this.state.isLoaded ? (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">\r\n                        <div className=\"words-and-definitions\">\r\n                            {\r\n                                this.props.text.split(/[ X\\n]/).map((word, i) => {\r\n                                    var lastWordDefined = -1;\r\n                                    // if this word was not part of a previous compound word...\r\n                                    if (lastWordDefined === i)\r\n                                        return;\r\n\r\n                                    // check for compound words first\r\n                                    const compoundWord = word + \" \" + this.props.text.split(/[ X\\n]/)[i + 1];\r\n                                    if (compoundWord in this.state.searchResults) {\r\n                                        const defn = this.state.searchResults[compoundWord];\r\n                                        return <DefinedWord word={compoundWord} defn={defn} key={i} />\r\n                                    }\r\n\r\n                                    // make sure a defition was found\r\n                                    if (word in this.state.searchResults) {\r\n                                        const defn = this.state.searchResults[word];\r\n                                        return <DefinedWord word={word} defn={defn} key={i} />\r\n                                    }\r\n\r\n                                    return (<div className=\"definition-not-found\" key={i}>{word}</div>)\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        ) : (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">loading...</div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst tracau_API_key = \"WBBcwnwQpV89\";\r\n\r\nexport default SearchedText;\r\n","\r\nimport React from 'react';\r\nimport InputText from '../InputText/InputText';\r\nimport SearchedText from '../SearchedText/SearchedText';\r\n\r\nclass TextInput extends React.Component {\r\n    constructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { searched: false, searchedText: \"\" };\r\n\t\tthis.toggleSearch = this.toggleSearch.bind(this);\r\n\t}\r\n\r\n\ttoggleSearch(text) {\r\n\t\tthis.setState(state => ({\r\n\t\t\tsearched: !state.searched,\r\n\t\t\tsearchedText: text\r\n\t\t}));\r\n\t}\r\n    \r\n    render() {\r\n        return this.state.searched ? (\r\n            <div className=\"TextInput\">\r\n                <SearchedText text={this.state.searchedText}\r\n                    returnToSearch={_ => this.toggleSearch(\"\")}>\r\n                </SearchedText>\r\n            </div>\r\n        ) : (\r\n            <div className=\"TextInput\">\r\n                <header className=\"App-header\">\r\n                    <InputText submitSearch={this.toggleSearch}></InputText>\r\n                </header>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TextInput;","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport './App.scss';\r\nimport ImageInput from './components/ImageInput/ImageInput';\r\nimport TextInput from './components/TextInput/TextInput';\r\n\r\nclass App extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/text\" component={TextInput} />\r\n\t\t\t\t\t\t<Route path=\"/img\" component={ImageInput} />\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={TextInput} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}