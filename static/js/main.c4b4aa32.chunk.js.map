{"version":3,"sources":["components/ImageDetections/ImageDetections.js","components/ImageInput/ImageInput.js","components/TracauShoutout/TracauShoutout.jsx","components/InputText/InputText.jsx","components/Definition/Definition.jsx","components/DefinedWord/DefinedWord.jsx","components/SearchedText/SearchedText.jsx","components/TextInput/TextInput.js","App.js","reportWebVitals.js","index.js"],"names":["ImageDetections","detection","definitions","console","log","defnsList","map","defs","innerDefnsList","def","undefined","className","partOfSpeech","definition","translations","length","tr","text","this","props","detections","p0","boundingPoly","vertices","p1","p2","p3","x","Math","abs","rotation","detectImageRotation","i","yTop","min","y","xLeft","yBottom","max","xRight","topProp","leftProp","heightProp","widthProp","imageWidth","popover","Popover","id","description","Title","Content","renderDefinition","adjustedImageHeight","window","innerHeight","adjustedImageWidth","imageHeight","adjustedTop","adjustedLeft","adjustedHeight","adjustedWidth","OverlayTrigger","placement","overlay","style","top","left","height","width","renderDetectionsOnImage","src","URL","createObjectURL","images","React","Component","ImageInput","state","img_files","img_buffers","imagesInput","imagesParsed","textDetections","definedDetections","detectionsLoaded","changeImage","bind","setImageProps","event","setState","target","files","img_type","parseFiles","a","promises","Array","from","img_file","parseFile","Promise","all","then","strings","getOCR","resolve","reader","FileReader","addEventListener","image","Image","result","onload","readAsDataURL","axios","post","img","data","textAnnotations","fullText","fullTextAnnotation","getDefinitions","defnPromises","replace","toLowerCase","get","ru","root","rootTag","item","innerDefs","innerItem","hasRoot","indexOf","isDetail","isLetter","rootStart","slice","Object","assign","filter","val","catch","error","response","status","results","searchAgainPromises","rootDefinitions","DEEPL_API_KEY","key","defn","type","onChange","TracauShoutout","href","alt","InputText","curText","shiftKey","submitSearch","onKeyPress","detectHotkeySubmit","value","icon","faSearch","onClick","_","Definition","startsWith","DefinedWord","word","as","SearchedText","isLoaded","searchResults","words","split","compoundDefs","compoundPromises","searchCompoundWord","compoundDef","remainingSearchPromises","compoundPrev","compoundNext","tracauSearch","searchedText","trim","tracau_API_key","tratu","tracauData","fields","fulltext","engDefStart","defnTab","engDefEnd","defnsStartTag","defnsStart","defns","defnsEnd","entryList","forEach","parsedDef","seeOtherTag","seeOtherEnd","push","search","footer","returnToSearch","compoundWord","TextInput","searched","toggleSearch","App","path","component","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c4b4aa32.chunk.js","sourcesContent":["import React from 'react';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport './ImageDetections.scss';\r\n\r\nclass ImageDetections extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\trenderDefinition(detection) {\r\n\t\tif (detection.definitions) {\r\n\t\t\tconsole.log(\"detection\", detection);\r\n\t\t\tconst defnsList = detection.definitions.map(defs => {\r\n\t\t\t\tconsole.log(defs);\r\n\t\t\t\tconst innerDefnsList = defs.map(def => {\r\n\t\t\t\t\tif (def === undefined) return;\r\n\t\t\t\t\tconsole.log(\"def\", def);\r\n\t\t\t\t\treturn (<li>{def}</li>);\r\n\t\t\t\t});\r\n\t\t\t\treturn (<>{innerDefnsList}</>);\r\n\t\t\t});\r\n\t\t\treturn (<><div className=\"part-of-speech\">{detection.partOfSpeech}</div><ol>{defnsList}</ol></>);\r\n\r\n\t\t} else if (detection.definition.translations.length > 0) {\r\n\t\t\tif (detection.definition.translations[0] === '' || detection.definition.translations[0] === undefined) return (\"no definition found :(\")\r\n\t\t\tconst defnsList = detection.definition.translations.map(tr => {\r\n\t\t\t\treturn (<li>{tr.text}</li>);\r\n\t\t\t});\r\n\t\t\treturn (<ol>{defnsList}</ol>);\r\n\r\n\t\t} else return (\"no definition found :(\");\r\n\t}\r\n\r\n\tdetectImageRotation() {\r\n\t\t// pages -> blocks -> paragraphs -> words\r\n\t\tconst detection = this.props.detections[0];\r\n\t\tconst p0 = detection.boundingPoly.vertices[0];\r\n\t\tconst p1 = detection.boundingPoly.vertices[1];\r\n\t\tconst p2 = detection.boundingPoly.vertices[3];\r\n\t\tconst p3 = detection.boundingPoly.vertices[2];\r\n\r\n\t\tif (p1.x > p0.x && Math.abs(p1.x - p0.x) > Math.abs(p1.x - p3.x)) {\r\n\t\t\treturn \"right side up\";\r\n\t\t}\r\n\t\t\r\n\t\telse {\r\n\t\t\tconsole.log(\"the image was flipped at some point during detection and I simply don't know why :/\");\r\n\t\t\tif (p1.x < p0.x && Math.abs(p1.x - p0.x) > Math.abs(p0.x - p3.x)) {\r\n\t\t\t\tconsole.log(\"2 3\\n1 0\");\r\n\t\t\t\treturn \"upside-down\";\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (p2.x > p1.x && Math.abs(p2.x - p1.x) > Math.abs(p1.x - p0.x)) {\r\n\t\t\t\treturn \"rotated left\";\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (p1.x > p2.x && Math.abs(p1.x - p2.x) > Math.abs(p1.x - p0.x)) {\r\n\t\t\t\tconsole.log(\"3 0\\n2 1\");\r\n\t\t\t\treturn \"rotated right\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trenderDetectionsOnImage() {\r\n\t\tconst rotation = this.detectImageRotation();\r\n\r\n\t\tconst detections = this.props.detections.map((detection, i) => {\r\n\t\t\tconst p0 = detection.boundingPoly.vertices[0];\r\n            const p1 = detection.boundingPoly.vertices[1];\r\n            const p2 = detection.boundingPoly.vertices[3];\r\n            const p3 = detection.boundingPoly.vertices[2];\r\n\r\n\t\t\tconst yTop = Math.min(p0.y, p1.y, p2.y, p3.y);\r\n            const xLeft = Math.min(p0.x, p1.x, p2.x, p3.x);\r\n            const yBottom = Math.max(p0.y, p1.y, p2.y, p3.y);\r\n            const xRight = Math.max(p0.x, p1.x, p2.x, p3.x);\r\n\r\n            const height = yBottom - yTop;\r\n            const width = xRight - xLeft;\r\n\r\n            var topProp = yTop;\r\n            var leftProp = xLeft;\r\n            var heightProp = height;\r\n            var widthProp = width;\r\n\r\n\t\t\tif (rotation !== \"right side up\") {\r\n\t\t\t\tif (rotation === \"rotated left\") {\r\n\t\t\t\t\ttopProp = xLeft;\r\n                    leftProp = this.props.imageWidth - yBottom;\r\n                    heightProp = xRight - xLeft;\r\n                    widthProp = yBottom - yTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (rotation === \"rotated right\") {\r\n\t\t\t\t\tconsole.log(\"correcting right rotation\");\r\n\t\t\t\t\ttopProp = xLeft;\r\n                    leftProp = this.props.imageWidth - yBottom;\r\n                    heightProp = xRight - xLeft;\r\n                    widthProp = yBottom - yTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (rotation === \"upside-down\") {\r\n\t\t\t\t\tconsole.log(\"correcting upside-down rotation\");\r\n\t\t\t\t\ttopProp = xLeft;\r\n                    leftProp = this.props.imageWidth - yBottom;\r\n                    heightProp = xRight - xLeft;\r\n                    widthProp = yBottom - yTop;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst popover = (\r\n\t\t\t\t<Popover className=\"dynamic-text-size\" id={detection.description} key={detection.description + topProp + \"-popover\"}>\r\n\t\t\t\t\t<Popover.Title className=\"large-dynamic-text-size\">{detection.description}</Popover.Title>\r\n\t\t\t\t\t<Popover.Content>\r\n\t\t\t\t\t\t{this.renderDefinition(detection)}\r\n\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t</Popover>\r\n\t\t\t);\r\n\r\n\t\t\tconst adjustedImageHeight = window.innerHeight;\r\n\t\t\tconst adjustedImageWidth = window.innerHeight * (this.props.imageWidth / this.props.imageHeight);\r\n\r\n\t\t\tconst adjustedTop = (topProp / this.props.imageHeight) * adjustedImageHeight;\r\n\t\t\tconst adjustedLeft = (leftProp / this.props.imageWidth) * adjustedImageWidth;\r\n\t\t\tconst adjustedHeight = (heightProp / this.props.imageHeight) * adjustedImageHeight;\r\n\t\t\tconst adjustedWidth = (widthProp / this.props.imageWidth) * adjustedImageWidth;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div key={detection.description + topProp}>\r\n\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\tkey={detection.description}\r\n\t\t\t\t\t\tplacement='top'\r\n\t\t\t\t\t\toverlay={popover}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"text-overlay\" style={{ top: adjustedTop, left: adjustedLeft, height: adjustedHeight, width: adjustedWidth }}></div>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn detections;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"ImageDetections\">\r\n\t\t\t\t<div className=\"img-box\">\r\n\t\t\t\t\t{this.renderDetectionsOnImage()}\r\n\t\t\t\t\t<img src={URL.createObjectURL(this.props.images[0])} height={window.innerHeight} top=\"0px\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ImageDetections;","import axios from 'axios';\r\nimport React from 'react';\r\nimport ImageDetections from '../ImageDetections/ImageDetections';\r\nimport './ImageInput.scss';\r\nimport YANDEX_API_KEY from '../../yandex_key.json';\r\nimport DEEPL_API_KEY from '../../deepL_api_key.json';\r\n\r\nclass ImageInput extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { img_files: null, img_buffers: null, imagesInput: false, imagesParsed: false, textDetections: null, definedDetections: null, detectionsLoaded: false, imageWidth: 0, imageHeight: 0 };\r\n        this.changeImage = this.changeImage.bind(this);\r\n        this.setImageProps = this.setImageProps.bind(this);\r\n    }\r\n\r\n    changeImage(event) {\r\n        this.setState({ img_files: event.target.files, img_type: '.jpg', imagesInput: true }, this.parseFiles);\r\n    }\r\n\r\n    async parseFiles() {\r\n        const promises = Array.from(this.state.img_files).map(img_file => {\r\n            return this.parseFile(img_file);\r\n        });\r\n\r\n        Promise.all(promises).then(strings => {\r\n            this.setState({ img_buffers: strings, imagesParsed: true }, this.getOCR);\r\n        });\r\n    }\r\n\r\n    setImageProps(width, height) {\r\n        this.setState({ imageWidth: width, imageHeight: height });\r\n    }\r\n\r\n    async parseFile(img_file) {\r\n        const setImageProps = this.setImageProps;\r\n\r\n        return new Promise(function (resolve) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", event => {\r\n                var image = new Image();\r\n                image.src = event.target.result;\r\n\r\n                image.onload = function() {\r\n                    setImageProps(this.width, this.height);\r\n                }\r\n\r\n                resolve(reader.result);\r\n            }, false);\r\n            reader.readAsDataURL(img_file);\r\n        });\r\n    }\r\n\r\n    async getOCR() {\r\n        return axios.post(`https://us-east4-true-bit-315318.cloudfunctions.net/documentTextDetection`, { img: this.state.img_buffers[0] }).then(result => {\r\n            this.setState({ textDetections: result.data.textAnnotations, fullText: result.data.fullTextAnnotation }, this.getDefinitions);\r\n        });\r\n    }\r\n\r\n    async getDefinitions() {\r\n        const defnPromises = this.state.textDetections.map((detection, i) => {\r\n            if (i === 0) return;    //skip the complete text one\r\n\r\n            const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n            const text = detection.description.replace(punctuation, \"\").toLowerCase();\r\n            if (text.length === 0) return;\r\n\r\n            return axios.get(`https://en.wiktionary.org/api/rest_v1/page/definition/${text}?redirect=false`).then(result => {\r\n                const partOfSpeech = result.data.ru[0].partOfSpeech;\r\n\r\n                var root = null;\r\n                const rootTag = 'of <span class=\"form-of-definition-link\"><i class=\"Cyrl mention\" lang=\"ru\"><a rel=\"mw:WikiLink\" href=\"/wiki/';\r\n                const rootDetailTag = '<span class=\"form-of-definition use-with-mention';\r\n                const letterTag = 'Letter \"<span';\r\n                const defs = result.data.ru.map(item => {\r\n                    const innerDefs = item.definitions;\r\n                    const innerDef = innerDefs.map(innerItem => {\r\n                        const def = innerItem.definition;\r\n                        const hasRoot = def.indexOf(rootTag);\r\n                        if (hasRoot !== -1) {\r\n                            const rootStart = innerDefs[0].definition.slice(hasRoot + rootTag.length);\r\n                            root = rootStart.slice(0, rootStart.indexOf('#Russian'));\r\n                            return;\r\n                        }\r\n                        const isDetail = def.indexOf(rootDetailTag);\r\n                        const isLetter = def.indexOf(letterTag);\r\n                        if (isDetail !== -1 || isLetter !== -1) return;\r\n                        return def;\r\n                    });\r\n\r\n                    return innerDef;\r\n                });\r\n\r\n                Object.assign(detection, {root: partOfSpeech, definitions: defs.filter(val => val !== undefined), root: root});\r\n                return detection;\r\n\r\n            }).catch(function(error) {\r\n                //definition not found\r\n                if (error.response.status === 404) return;\r\n\r\n                console.error(error);\r\n            });\r\n        });\r\n\r\n        Promise.all(defnPromises).then(results => {\r\n            console.log(\"wiktionary results\", results);\r\n            const searchAgainPromises = results.map(detection => {\r\n                if (detection === undefined) return;\r\n\r\n                if (detection.root !== null) {\r\n                    return axios.get(`https://en.wiktionary.org/api/rest_v1/page/definition/${detection.root}?redirect=false`).then(result => {\r\n                        Object.assign(detection, { rootDefinitions: result });\r\n                        return detection;\r\n                    }).catch(function(error) {\r\n                        //definition not found\r\n                        if (error.response.status === 404) return;\r\n                        \r\n                        console.error(error);\r\n                    });\r\n                }\r\n\r\n                if (detection.definitions === undefined) {\r\n                    const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n                    const text = detection.description.replace(punctuation, \"\").toLowerCase();\r\n\r\n                    return axios.get(`https://api-free.deepl.com/v2/translate?auth_key=${DEEPL_API_KEY.key}&text=${text}&target_lang=EN`).then(defn => {\r\n                        Object.assign(detection, { definition: defn.data });\r\n                        return detection;\r\n                    });\r\n                } else { return detection }\r\n            })\r\n\r\n            Promise.all(searchAgainPromises).then(results => {\r\n                console.log(\"wiktionary + deepl results\", results.filter(val => val !== undefined));\r\n                this.setState({ definedDetections: results.filter(val => val !== undefined), detectionsLoaded: true });\r\n            });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return this.state.detectionsLoaded ? (\r\n            <div className=\"ImageInput\">\r\n                <ImageDetections detections={this.state.definedDetections} images={this.state.img_files} imageWidth={this.state.imageWidth} imageHeight={this.state.imageHeight} fullText={this.state.fullText} />\r\n            </div>\r\n        ) : this.state.imagesParsed ? (\r\n            <div className=\"ImageInput\">\r\n                Loading image text...\r\n                <div>\r\n                    <img src={this.state.img_buffers[0]} height={0.5 * window.innerHeight}></img>\r\n                </div>\r\n            </div>\r\n        ) : (\r\n            <div className=\"ImageInput\">\r\n               <div><input type='file' id='single' onChange={this.changeImage} /></div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImageInput;","import React from 'react';\r\nimport './TracauShoutout.scss';\r\n\r\nclass TracauShoutout extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"tracau-banner\">\r\n\t\t\t\t<a href=\"https://tracau.vn\">\r\n\t\t\t\t\t<img src=\"https://tracau.vn/assets/img/api/banner_white.png\" alt=\"Powered by tra câu\"/>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TracauShoutout;","import React from 'react';\r\nimport TracauShoutout from '../TracauShoutout/TracauShoutout';\r\nimport './InputText.scss';\r\nimport '../../App.scss';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass InputText extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {text: \"\"};\r\n    }\r\n\r\n    detectHotkeySubmit(event, curText) {\r\n        if (event.shiftKey && event.key === \"Enter\") {\r\n            this.props.submitSearch(curText);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"InputText\">\r\n                <div className=\"main-content\">\r\n                    <div>Enter text: </div>\r\n                    <div className=\"upper-flex\" onKeyPress = { event => this.detectHotkeySubmit(event, this.state.text) }>\r\n                        <textarea className=\"big-textbox\"\r\n                            value = {this.state.text}\r\n                            onChange = { event => this.setState({ text: event.target.value }) }></textarea>\r\n                        <FontAwesomeIcon icon={faSearch} onClick={_ => this.props.submitSearch(this.state.text)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <TracauShoutout></TracauShoutout>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default InputText;","import React from 'react';\r\nimport '../../App.scss';\r\n\r\nclass Definition extends React.Component {\r\n    render() {\r\n        if (this.props.defnsList[0].startsWith(\"See \")) {\r\n            this.defnsList = this.props.defnsList.slice(1);\r\n        } else this.defnsList = this.props.defnsList;\r\n\r\n        return (\r\n            <div className=\"Definition\">\r\n                <ol>\r\n                    {this.defnsList.map((defn) => <li>{defn}</li>)}\r\n                </ol>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Definition;","import React from 'react';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport '../../App.scss';\r\nimport Definition from '../Definition/Definition';\r\n\r\nclass DefinedWord extends React.Component {\r\n    render() {\r\n        const popover = (\r\n            <Popover id={this.props.word}>\r\n                <Popover.Title as=\"h3\">{this.props.word}</Popover.Title>\r\n                <Popover.Content>\r\n                    <Definition defnsList={this.props.defn} />\r\n                </Popover.Content>\r\n            </Popover>\r\n        );\r\n\r\n        return (\r\n            <div className=\"DefinedWord\">\r\n                <OverlayTrigger\r\n                    key={this.props.word}\r\n                    placement='top'\r\n                    overlay={popover}\r\n                >\r\n                    <div>{this.props.word}</div>\r\n                </OverlayTrigger>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DefinedWord;","import React from 'react';\r\nimport TracauShoutout from '../TracauShoutout/TracauShoutout';\r\nimport DefinedWord from '../DefinedWord/DefinedWord';\r\nimport '../../App.scss';\r\nimport './SearchedText.scss';\r\nimport axios from 'axios';\r\n\r\nclass SearchedText extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { isLoaded: false, searchResults: {} };\r\n    }\r\n\r\n    search(text) {\r\n        const words = text.split(/[ X\\n]/);\r\n        // console.log(\"searching for words\", words);\r\n\r\n        var compoundDefs = {};\r\n\r\n        const compoundPromises = words.map((word, i) => {\r\n            // check for compound words first\r\n            return this.searchCompoundWord(words, i).then((compoundDef) => {\r\n                if (compoundDef && compoundDef.length > 0) {\r\n                    if (!compoundDef[0].startsWith(\"See \")) {\r\n                        compoundDefs[word + \" \" + words[i + 1]] = compoundDef;\r\n                        return Promise.resolve();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        return Promise.all(compoundPromises).then(() => {\r\n            var definitions = Object.assign({}, compoundDefs);  // shallow copy\r\n            console.log(\"compound definitions:\", definitions);\r\n\r\n            const remainingSearchPromises = words.map((word, i) => {\r\n                const compoundPrev = words[i - 1] + \" \" + word;\r\n                const compoundNext = word + \" \" + words[i + 1];\r\n                if (!(compoundPrev in compoundDefs) && !(compoundNext in compoundDefs)) {\r\n                    // not part of a compound word\r\n                    return this.tracauSearch(word).then(def => {\r\n                        if (def && def.length > 0) {\r\n                            definitions[word] = def;\r\n                        }\r\n                        // if it could not be defined, we will simply gray out the word\r\n                        return Promise.resolve();\r\n                    });\r\n                } else return Promise.resolve();\r\n            });\r\n\r\n            return Promise.all(remainingSearchPromises).then(definitions);\r\n        });\r\n    }\r\n\r\n    searchCompoundWord(words, i) {\r\n        if (words.length > i + 1) {\r\n            return this.tracauSearch(words[i] + \" \" + words[i + 1]);\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n    tracauSearch(searchedText) {\r\n        // strip special characters first\r\n        const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n        const text = searchedText.trim().replace(punctuation, \"\");\r\n\r\n        return axios.get(\"https://api.tracau.vn/\" + tracau_API_key + \"/s/\" + text + \"/vi\").then(result => {\r\n            // console.log(`result for ${searchedText}:`, result);\r\n\r\n            if (result.data.tratu.length <= 0)\r\n                return false;\r\n\r\n            const tracauData = result.data.tratu[0].fields.fulltext;\r\n\r\n            const engDefStart = tracauData.indexOf('<article id=\"dict_vv\" data-tab-name=\"Việt - Anh\"');\r\n            var defnTab = tracauData.slice(engDefStart);\r\n            const engDefEnd = defnTab.indexOf('</article>');\r\n            defnTab = defnTab.slice(0, engDefEnd);\r\n\r\n            const defnsStartTag = '<table id=\"definition_T_ve_id\" border=\"0\">';\r\n            const defnsStart = defnTab.indexOf(defnsStartTag) + defnsStartTag.length;\r\n            var defns = defnTab.slice(defnsStart);\r\n            const defnsEnd = defns.indexOf('</table>');\r\n            defns = defns.slice(0, defnsEnd);\r\n\r\n            const aDefStartTag = '<td id=\"I_C\"><font color=\"#999\">■</font></td><td id=\"C_C\" colspan=\"2\">';\r\n            const entryList = defns.split(aDefStartTag);\r\n\r\n            var defnsList = [];\r\n            entryList.slice(1).forEach(def => {\r\n                var parsedDef = def.slice(0, def.indexOf('</td>'));\r\n\r\n                // check if tracau is trying to redirect user to a similar word\r\n                const seeOtherTag = 'Xem <font color=\"#1371BB\">';\r\n                const seeOtherTagLower = 'xem <font color=\"#1371BB\">';\r\n                const seeOtherEnd = parsedDef.indexOf('</font>')\r\n                if (parsedDef.startsWith(seeOtherTag) || parsedDef.startsWith(seeOtherTagLower)) {\r\n                    parsedDef = \"See \" + parsedDef.slice(seeOtherTag.length, seeOtherEnd);\r\n                }\r\n\r\n                defnsList.push(parsedDef);\r\n            });\r\n\r\n            return defnsList;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.search(this.props.text).then((result) => {\r\n            console.log(\"search results\", result);\r\n            this.setState({ isLoaded: true, searchResults: result });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const footer = (\r\n            <div className=\"footer\">\r\n                <div className=\"submit-search\">\r\n                    <button onClick={this.props.returnToSearch}>Search again</button>\r\n                </div>\r\n                <TracauShoutout></TracauShoutout>\r\n            </div>\r\n        );\r\n\r\n        return this.props.text === \"\" ? (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">\r\n                        <div>Oops! Looks like no text was input. Would you like to search again?</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        ) : this.state.isLoaded ? (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">\r\n                        <div className=\"words-and-definitions\">\r\n                            {\r\n                                this.props.text.split(/[ X\\n]/).map((word, i) => {\r\n                                    var lastWordDefined = -1;\r\n                                    // if this word was not part of a previous compound word...\r\n                                    if (lastWordDefined === i)\r\n                                        return;\r\n\r\n                                    // check for compound words first\r\n                                    const compoundWord = word + \" \" + this.props.text.split(/[ X\\n]/)[i + 1];\r\n                                    if (compoundWord in this.state.searchResults) {\r\n                                        const defn = this.state.searchResults[compoundWord];\r\n                                        return <DefinedWord word={compoundWord} defn={defn} key={i} />\r\n                                    }\r\n\r\n                                    // make sure a defition was found\r\n                                    if (word in this.state.searchResults) {\r\n                                        const defn = this.state.searchResults[word];\r\n                                        return <DefinedWord word={word} defn={defn} key={i} />\r\n                                    }\r\n\r\n                                    return (<div className=\"definition-not-found\" key={i}>{word}</div>)\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        ) : (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">loading...</div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst tracau_API_key = \"WBBcwnwQpV89\";\r\n\r\nexport default SearchedText;\r\n","\r\nimport React from 'react';\r\nimport InputText from '../InputText/InputText';\r\nimport SearchedText from '../SearchedText/SearchedText';\r\n\r\nclass TextInput extends React.Component {\r\n    constructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { searched: false, searchedText: \"\" };\r\n\t\tthis.toggleSearch = this.toggleSearch.bind(this);\r\n\t}\r\n\r\n\ttoggleSearch(text) {\r\n\t\tthis.setState(state => ({\r\n\t\t\tsearched: !state.searched,\r\n\t\t\tsearchedText: text\r\n\t\t}));\r\n\t}\r\n    \r\n    render() {\r\n        return this.state.searched ? (\r\n            <div className=\"TextInput\">\r\n                <SearchedText text={this.state.searchedText}\r\n                    returnToSearch={_ => this.toggleSearch(\"\")}>\r\n                </SearchedText>\r\n            </div>\r\n        ) : (\r\n            <div className=\"TextInput\">\r\n                <header className=\"App-header\">\r\n                    <InputText submitSearch={this.toggleSearch}></InputText>\r\n                </header>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TextInput;","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport './App.scss';\r\nimport ImageInput from './components/ImageInput/ImageInput';\r\nimport TextInput from './components/TextInput/TextInput';\r\n\r\nclass App extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/text\" component={TextInput} />\r\n\t\t\t\t\t\t<Route path=\"/img\" component={ImageInput} />\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={TextInput} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}